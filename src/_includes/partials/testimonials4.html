{% set postslist = collections["Testimonials"] %}

<div class="bg-white">
	<div class="mx-auto py-12 px-4 max-w-7xl sm:px-6 lg:px-8 lg:py-24">
		<div class="space-y-12">
			<div class="flex flex-wrap mx-auto mb-20">
				<div class="p-4 mb-6 lg:w-1/2 lg:mb-0">
					<h2 class="mb-2 prose prose-2xl text-br-900 text-2xl font-bold tracking-widest uppercase">Testimonials</h2>
					<div class="w-20 h-1 bg-br-300 rounded"></div>
				</div>
			</div>

			<div class=" container mx-auto flex flex-col md:flex-row rounded-md shadow-sm overflow-hidden border-8 border-br-900" x-data="{ testimonialActive: 2 }" x-cloak>
				<div class="bg-waves-back bg-cover md:w-1/2">
					<div class="flex flex-col h-full relative bg-blend-multiply bg-white bg-opacity-50">

						<div class="relative md:h-24  justify-center px-6 pt-2 pb-6 md:py-6">
							{% for post in postslist%}
								<div class="text-center" x-show="testimonialActive == {{loop.index}}">
									<h2 class="prose prose-2xl text-3xl text-br-900 uppercase">
										<strong>"{{post.data.title}}"</strong>
									</h2>
								</div>
							{% endfor %}
						</div>

						<div class="md:h-96 px-12 relative z-10 w-full justify-center items-center text-justify">
							{% for post in postslist%}
								<div x-show.immediate="testimonialActive === {{loop.index}}">
									<article>
										<p class="text-br-900 prose prose px-6 md:px-16" x-show.transition="testimonialActive == {{loop.index}}">
											{{ post.templateContent | safe }}
										</p>
										<h3 class="py-8 prose prose-2xl text-2xl text-br-900 text-center uppercase">- {{post.data.author}}</h3>
									</article>
								</div>
							{% endfor %}
						</div>
						<div class="relative m-4 text-center block">
							<button
								class="prose prose rounded-l-full border-r bg-br-900 text-white focus:outline-none hover:bg-white hover:text-br-900 font-bold w-12 h-10"
								x-on:click="testimonialActive = testimonialActive === 1 ? {{postslist | length}} : testimonialActive - 1">
								&#8592;
							</button>
							<button
								class="prose prose rounded-r-full bg-br-900 text-white focus:outline-none hover:bg-white font-bold hover:text-br-900 w-12 h-10"
								x-on:click="testimonialActive = testimonialActive >= {{postslist | length}} ? 1 : testimonialActive + 1">
								&#8594;
							</button>
						</div>
					</div>
				</div>
				<div class="relative w-full md:w-1/2 flex flex-col item-center">
					<div class="w-full h-full object-cover">
					{% image "/static/img/posts/orig-athena-office.webp", "Athena Pearl Riley in the office" %}
					</div>
				</div>
			</div>
		</div>
	</div>
</div>